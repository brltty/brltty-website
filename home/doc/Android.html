<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Docutils 0.10: http://docutils.sourceforge.net/" />
<title>BRLTTY on Android</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7434 2012-05-11 21:06:27Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { /* line numbers */
  color: grey;
}

.code {
  background-color: #eeeeee
}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="brltty-on-android">
<h1 class="title">BRLTTY on Android</h1>

<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#using-brltty" id="id2">Using BRLTTY</a><ul>
<li><a class="reference internal" href="#system-requirements" id="id3">System Requirements</a></li>
<li><a class="reference internal" href="#quick-start" id="id4">Quick Start</a><ul>
<li><a class="reference internal" href="#on-your-computer" id="id5">On Your Computer</a></li>
<li><a class="reference internal" href="#on-your-android-device" id="id6">On Your Android Device</a></li>
</ul>
</li>
<li><a class="reference internal" href="#activation-and-configuration" id="id7">Activation and Configuration</a><ul>
<li><a class="reference internal" href="#starting-and-stopping-brltty" id="id8">Starting and Stopping BRLTTY</a></li>
<li><a class="reference internal" href="#connecting-your-braille-device" id="id9">Connecting Your Braille Device</a><ul>
<li><a class="reference internal" href="#connecting-via-bluetooth" id="id10">Connecting Via Bluetooth</a></li>
<li><a class="reference internal" href="#connecting-via-usb" id="id11">Connecting Via USB</a></li>
</ul>
</li>
<li><a class="reference internal" href="#defining-your-braille-device" id="id12">Defining Your Braille Device</a></li>
<li><a class="reference internal" href="#using-a-braille-keyboard" id="id13">Using a Braille Keyboard</a></li>
</ul>
</li>
<li><a class="reference internal" href="#navigating-the-screen" id="id14">Navigating the Screen</a><ul>
<li><a class="reference internal" href="#using-multiple-hosts" id="id15">Using Multiple Hosts</a></li>
<li><a class="reference internal" href="#accessibility-focus" id="id16">Accessibility Focus</a></li>
<li><a class="reference internal" href="#the-cursor-routing-keys" id="id17">The Cursor Routing Keys</a></li>
<li><a class="reference internal" href="#input-areas" id="id18">Input Areas</a></li>
<li><a class="reference internal" href="#widget-representations" id="id19">Widget Representations</a><ul>
<li><a class="reference internal" href="#check-boxes" id="id20">Check Boxes</a></li>
<li><a class="reference internal" href="#radio-buttons" id="id21">Radio Buttons</a></li>
<li><a class="reference internal" href="#switches" id="id22">Switches</a></li>
<li><a class="reference internal" href="#range-controls" id="id23">Range Controls</a></li>
<li><a class="reference internal" href="#disabled-controls" id="id24">Disabled Controls</a></li>
</ul>
</li>
<li><a class="reference internal" href="#global-actions" id="id25">Global Actions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#when-brltty-crashes" id="id26">When BRLTTY Crashes</a></li>
<li><a class="reference internal" href="#known-issues" id="id27">Known Issues</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-brltty" id="id28">Building BRLTTY</a><ul>
<li><a class="reference internal" href="#preparing-your-host-environment" id="id29">Preparing Your Host Environment</a></li>
<li><a class="reference internal" href="#installing-and-preparing-the-brltty-source-tree" id="id30">Installing and Preparing the BRLTTY Source Tree</a></li>
<li><a class="reference internal" href="#building-brltty-for-android" id="id31">Building BRLTTY for Android</a></li>
<li><a class="reference internal" href="#preparing-your-android-device" id="id32">Preparing Your Android Device</a></li>
<li><a class="reference internal" href="#installing-brltty-on-your-android-device" id="id33">Installing BRLTTY on Your Android Device</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="using-brltty">
<h2><a class="toc-backref" href="#id2">Using BRLTTY</a></h2>
<div class="section" id="system-requirements">
<h3><a class="toc-backref" href="#id3">System Requirements</a></h3>
<p>BRLTTY has been designed to run on at least Android 4.1 (Jelly Bean). While it
does run on Android 4.0 (Ice Cream Sandwich), many of its highly desirable
features won't work.</p>
<p>BRLTTY requires access to a number of privileged Android operating system
capabilities. The required permissions are as follows:</p>
<dl class="docutils">
<dt><tt class="docutils literal">BIND_ACCESSIBILITY_SERVICE</tt></dt>
<dd>This permission is required so that BRLTTY can inspect the layout and
content of the screen.</dd>
<dt><tt class="docutils literal">BIND_INPUT_METHOD</tt></dt>
<dd>This permission is required so that Android will accept input from your
braille device's keyboard.</dd>
<dt><tt class="docutils literal">WAKE_LOCK</tt></dt>
<dd>This permission is required so that BRLTTY can reset the Android device's
lock timer each time you interact with a control on your braille device.</dd>
<dt><tt class="docutils literal">BLUETOOTH</tt></dt>
<dd>This permission is required so that BRLTTY can use Bluetooth to communicate
with your braille device.</dd>
<dt><tt class="docutils literal">BLUETOOTH_ADMIN</tt></dt>
<dd>This permission is required on Android 4.0 (ICS) so that BRLTTY can use
Bluetooth to communicate with your braille device.</dd>
<dt><tt class="docutils literal">INTERNET</tt></dt>
<dd>This permission is required so that BRLTTY can listen on a TCP/IP port for
BrlAPI client connection requests.</dd>
<dt><tt class="docutils literal">READ_EXTERNAL_STORAGE</tt></dt>
<dd>This permission is required so that BRLTTY can read customized data files
from your SD card.</dd>
</dl>
</div>
<div class="section" id="quick-start">
<h3><a class="toc-backref" href="#id4">Quick Start</a></h3>
<p>If you'd just like to install BRLTTY onto your Android device and get going,
then here's what you need to do. These instructions are from the perspective of
a Firefox user on Windows, but the process should be much the same when using a
different web browser and/or operating system.</p>
<div class="section" id="on-your-computer">
<h4><a class="toc-backref" href="#id5">On Your Computer</a></h4>
<ol class="arabic simple">
<li>Go to <a class="reference external" href="http://brltty.com/">BRLTTY's Web Site</a>.</li>
<li>Find the <tt class="docutils literal">Download</tt> link and press enter on it.</li>
<li>Find the <tt class="docutils literal">Android</tt> heading, down-arrow from there to the link that says
<tt class="docutils literal">Latest APK</tt>, and press enter on it.</li>
<li>You'll be prompted to open or save the file at this point. Save it.</li>
<li>Go to your <tt class="docutils literal">Downloads</tt> folder (or wherever you save downloads), and
find the <tt class="docutils literal"><span class="pre">brltty-latest.apk</span></tt> file.</li>
<li>If the file has been saved on your computer as <tt class="docutils literal"><span class="pre">brltty-latest.zip</span></tt>,
then press the <tt class="docutils literal">Context</tt> key, arrow to and press enter on
<tt class="docutils literal">Rename</tt>, and change the file extension from <tt class="docutils literal">zip</tt> to
<tt class="docutils literal">apk</tt>. Don't worry if you get a warning about the possibility of
rendering the file unusable. Go ahead with the rename.</li>
</ol>
</div>
<div class="section" id="on-your-android-device">
<h4><a class="toc-backref" href="#id6">On Your Android Device</a></h4>
<ol class="arabic">
<li><p class="first">Go into <tt class="docutils literal">Settings</tt> -&gt; <tt class="docutils literal">Security</tt>, and tap to check <tt class="docutils literal">Unknown
Sources</tt>. This option says something like:</p>
<blockquote>
<p>Allow the installation of apps from unknown sources</p>
</blockquote>
<p>This is a one-time step. Once the box has been checked, it stays checked.</p>
</li>
<li><p class="first">Copy the <tt class="docutils literal">apk</tt> file to your device. There are a number of ways to do
this:</p>
<ul class="simple">
<li>The easiest way may be to email it to yourself as a file attachment so
that it will go to the email on your Android device.</li>
<li>Another option is to save the file in Dropbox on your computer, and
then wait for it to show up in Dropbox on your Android device.</li>
<li>Another option is to connect your Android device to your computer via
a USB cable, and then to copy the file to it in the same way that
you'd copy a file to a thumb drive.</li>
</ul>
</li>
<li><p class="first">Tap the <tt class="docutils literal"><span class="pre">brltty-latest.apk</span></tt> file to start installation, and answer any
prompts. If you use the Dropbox method, you may need to tap on the file
twice - once to download it, and a second time to start installation.</p>
</li>
<li><p class="first">Tap <tt class="docutils literal">OK</tt> when installation is complete.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="activation-and-configuration">
<h3><a class="toc-backref" href="#id7">Activation and Configuration</a></h3>
<p>At this point, BRLTTY has been installed. Next, you'll need to go into
<tt class="docutils literal">Settings</tt> -&gt; <tt class="docutils literal">Accessibility</tt> -&gt; <tt class="docutils literal">BRLTTY</tt> in order to turn the <tt class="docutils literal">BRLTTY</tt>
accessibility service on, adjust its settings, and select your braille device.</p>
<p>If you'll be connecting to your braille device via Bluetooth,
see <a class="reference internal" href="#connecting-via-bluetooth">Connecting Via Bluetooth</a>.</p>
<p>If you'll be connecting to your braille device via USB, see
<a class="reference internal" href="#connecting-via-usb">Connecting Via USB</a>.</p>
<p>If your braille device has a braille keyboard, see <a class="reference internal" href="#using-a-braille-keyboard">Using a Braille Keyboard</a>.</p>
<div class="section" id="starting-and-stopping-brltty">
<h4><a class="toc-backref" href="#id8">Starting and Stopping BRLTTY</a></h4>
<p>BRLTTY isn't a regular Android application - it's an accessibility service. As
such, it can't be started and stopped in the usual way - from the launcher. In
fact, it can't even be found within the applications list.</p>
<p>BRLTTY must be started and stopped from within the <tt class="docutils literal">Accessibility Settings</tt>
screen. To get there, launch the <tt class="docutils literal">Settings</tt> application, and then tap on
<tt class="docutils literal">Accessibility</tt> (near the bottom). This window contains a &quot;Services&quot; section,
which lists all of the accessibility services that are currently installed on
the device. For each installed accessibility service, there's an associated
indicator that says <tt class="docutils literal">On</tt> if that service is currently running, and <tt class="docutils literal">Off</tt> if
it isn't.</p>
<p>Find <tt class="docutils literal">BRLTTY</tt> and tap on it. This brings up a window with two items in it.
One is a &quot;switch&quot; for turning BRLTTY on and off. The other is a button that
takes you to BRLTTY's <tt class="docutils literal">Settings</tt> screen. You should go through BRLTTY's
settings, making changes as desired, as well as define your braille device(s),
before starting BRLTTY.</p>
</div>
<div class="section" id="connecting-your-braille-device">
<h4><a class="toc-backref" href="#id9">Connecting Your Braille Device</a></h4>
<div class="section" id="connecting-via-bluetooth">
<h5><a class="toc-backref" href="#id10">Connecting Via Bluetooth</a></h5>
<p>In order to use a Bluetooth braille devic, you'll need to first &quot;pair&quot; it with
your Android device. Go into <tt class="docutils literal">Settings</tt> -&gt; <tt class="docutils literal">Bluetooth</tt>. If your braille
device is already listed within the <tt class="docutils literal">Paired Devices</tt> section of that screen
then it has already been paired. If you still need to pair it then tap <tt class="docutils literal">Search
for Devices</tt>. This will add an <tt class="docutils literal">Available Devices</tt> section to the screen. If
your braille device isn't listed then you may need to perform a model-specific
action on it in order to make it visible (also known as discoverable) - see its
manual for details. After doing that, tap <tt class="docutils literal">Search for Devices</tt> again. Tap on
your braille device to begin a Bluetooth Pairing Request, enter its PIN (see
its manual for details), and tap <tt class="docutils literal">OK</tt>.</p>
</div>
<div class="section" id="connecting-via-usb">
<h5><a class="toc-backref" href="#id11">Connecting Via USB</a></h5>
<p>In order to use a USB braille device, you'll need a special cable known as a
&quot;Micro USB Host Adapter&quot;. The reason for this is that the USB port on an
Android device usually acts as a &quot;device&quot; (rather than as a &quot;host&quot;) port. This
is so that, for example, you can control your Android device from your
computer. The Micro USB Host Adapter has a special plug, known as an OTG
(on-the-go) connector, that, when inserted into the Android device's USB port,
instructs Android to act as a USB host.</p>
<p>The Micro USB Host Adapter also allows you to connect any other USB
device (keyboard, mouse, printer, hub, etc) to your Android device. Be aware,
though, that if any such device, including your braille device, draws power via
its USB port then your Android device's battery will become the source of that
power. If portability isn't an issue, you may wish to consider using your Micro
USB Host Adapter to connect your Android device to a powered hub so that your
devices will draw power from the hub rather than from your Android device's
battery. You may also wish to consider disabling USB charging on any devices
which offer this capability.</p>
</div>
</div>
<div class="section" id="defining-your-braille-device">
<h4><a class="toc-backref" href="#id12">Defining Your Braille Device</a></h4>
<p>You don't actually need to define your braille device, but BRLTTY will connect
to it faster if you do. If you don't, BRLTTY will search through all of the
devices that have been connected via eitehr Bluetooth or USB
(see <a class="reference internal" href="#connecting-your-braille-device">Connecting Your Braille Device</a>) for one that it recognizes. If there's
more than one, it'll select the first one that it finds.</p>
<p>To define your braille device, go to BRLTTY's <tt class="docutils literal">Settings</tt> screen and tap on
<tt class="docutils literal">Manage Devices</tt>. From there, find your braille device, and then tap <tt class="docutils literal">Add</tt>.
To find your device, select its communication method, then select the device
from the list that's presented, and then select the correct braille driver.</p>
<p>After you've added your braille device to BRLTTY, tap on <tt class="docutils literal">Selected Device</tt>
and select it from the list of devices that BRLTTY knows about.</p>
</div>
<div class="section" id="using-a-braille-keyboard">
<h4><a class="toc-backref" href="#id13">Using a Braille Keyboard</a></h4>
<p>Braille device keyboard input is supported, but, like all Android input
methods, it must be explicitly enabled, and then explicitly selected. BRLTTY
isn't permitted to do either of these automatically on your behalf. Although
it's inconvenient, Android imposes this manual process so that you're very
consciously aware of which input methods can process, and which input method
is currently processing, whatever you're typing. Such applications, after all,
handle extremely sensitive personal data (such as passwords, credit card
numbers, etc), so it's crucial that you make your own decisions regarding which
of them you're willing to trust.</p>
<p>If you type on your braille device's keyboard when BRLTTY's input method is
either disabled or enabled but not selected, then an alert message will appear
on your braille display that explains the problem. You may wish to enable
BRLTTY's keyboard support ahead of time, but you probably don't want to select
it ahead of time. The reason for this is that Android only allows exactly one
input method to be in use at a time. When you explicitly select BRLTTY's input
method, therefore, you're also implicitly deselecting the on-screen keyboard.</p>
<p>You can enable BRLTTY's keyboard support in one of the following ways:</p>
<ul class="simple">
<li>Launch Android's <tt class="docutils literal">Settings</tt> application and tap on <tt class="docutils literal">Language and Input</tt>.
The <tt class="docutils literal">Keyboard and Input Methods</tt> section of this screen shows the
<tt class="docutils literal">Default</tt> (currently selected) input method, and contains a check box for
each installed input method. An input method is enabled if its check box is
checked, so, to enable BRLTTY's keyboard support, check the box labeled
<tt class="docutils literal">BRLTTY Input Service</tt>. Once it's been enabled, you can select it at any
time by adjusting the <tt class="docutils literal">Default</tt> setting.</li>
<li>If BRLTTY is running then open Android's Notifications shade and tap on
BRLTTY's service notification. This takes you to BRLTTY's main Settings
screen. Tap on General Settings, and then on Switch Input Method. This brings
up Android's Input Method Picker. It asks you to select an input method, and
presents a set of radio buttons - one for each enabled input method. If
there's no radio button for BRLTTY's input method then it hasn't been enabled
yet. To enable it, tap the button labeled <tt class="docutils literal">Set up input methods</tt>. This
screen contains a check box for each installed input method. Check the box
labeled <tt class="docutils literal">BRLTTY Input Service</tt>. Then tap the <tt class="docutils literal">Back</tt> button to return to
the <tt class="docutils literal">Language and Input</tt> screen, find the <tt class="docutils literal">Keyboard and Input Methods</tt>
section of that screen, and set the <tt class="docutils literal">Default</tt> input method to BRLTTY's
input method.</li>
</ul>
</div>
</div>
<div class="section" id="navigating-the-screen">
<h3><a class="toc-backref" href="#id14">Navigating the Screen</a></h3>
<div class="section" id="using-multiple-hosts">
<h4><a class="toc-backref" href="#id15">Using Multiple Hosts</a></h4>
<p>BRLTTY only remains connected to your braille device while your Android device
is unlocked or while its screen is on. If your Android device is locked and its
screen is off then BRLTTY automatically disconnects from your braille device.
This is so that you can easily share your braille device amongst multiple
hosts.</p>
<p>Pressing your Android device's power button (or similar action) to wake it up,
even though it may still be locked, is sufficient to cause BRLTTY to
automatically reconnect to your braille device. This allows you to enter your
password or PIN via your braille keyboard.</p>
<p>You can continue using your braille device even though your Android device's
screen may have turned off, as long as its lock timer hasn't yet expired.
Pressing keys on your braille device resets your Android device's lock timer in
the same way that pressing its keys, touching its screen, etc does. This means
that your Android device will stay awake and unlocked even though you're only
controlling it from your braille device, and that it'll also still
automatically lock once you're no longer using it.</p>
</div>
<div class="section" id="accessibility-focus">
<h4><a class="toc-backref" href="#id16">Accessibility Focus</a></h4>
<p>The &quot;accessibility focus&quot; feature of Android is used for cursor tracking and
routing. It's a soft cursor, not visible on the screen, that can be
programmatically associated with any screen element. All screen readers that
use it to define the current element for actions (like tapping) will implicitly
cooperate reasonably seamlessly with one another.</p>
<p>The cursor is usually placed on the first character of the screen element that
currently has accessibility focus. The one exception to this is within an
input area. If that area has input focus then the cursor is placed at
the location within it where input will be inserted.</p>
<p>When a home screen folder is opened, BRLTTY automatically sets accessibility
focus to that folder's first entry. This eliminates the need to search for it.</p>
</div>
<div class="section" id="the-cursor-routing-keys">
<h4><a class="toc-backref" href="#id17">The Cursor Routing Keys</a></h4>
<p>The cursor routing keys of the braille device perform their usual function when
within an input area if it has input focus - the key above a given
character brings the cursor to that character. In any other context, however, a
cursor routing key performs an action on the screen element under it. Starting
with the leftmost routing key over a screen element, which we'll call key #1,
these actions are as follows:</p>
<ol class="arabic simple">
<li>set accessibility focus (used for cursor tracking and routing)</li>
<li>tap (click)</li>
<li>hold (long click)</li>
<li>scroll backward (up or left)</li>
<li>scroll forward (down or right)</li>
<li>context click</li>
</ol>
<p>A range control (progress bar, volume slider, etc) can be adjusted up/down
via the scroll forward/backward actions.</p>
</div>
<div class="section" id="input-areas">
<h4><a class="toc-backref" href="#id18">Input Areas</a></h4>
<p>When an input area has input focus, BRLTTY's attribute underlining
feature is used to highlight the selected text region.</p>
</div>
<div class="section" id="widget-representations">
<h4><a class="toc-backref" href="#id19">Widget Representations</a></h4>
<div class="section" id="check-boxes">
<h5><a class="toc-backref" href="#id20">Check Boxes</a></h5>
<p>A check box is rendered as a three-cell symbol:</p>
<ol class="arabic simple">
<li>dots 123478 (the left side of the box)</li>
<li>dots 2356 (the check mark)</li>
<li>dots 145678 (the right side of the box)</li>
</ol>
<p>The check mark is present if the box is checked and absent if it isn't.
If the check box has a label then it appears to the right of the symbol.
The braille representations are:</p>
<ul class="simple">
<li>⣏⠶⣹ checked</li>
<li>⣏ ⣹ not checked</li>
</ul>
</div>
<div class="section" id="radio-buttons">
<h5><a class="toc-backref" href="#id21">Radio Buttons</a></h5>
<p>A radio button is rendered as a three-cell symbol:</p>
<ol class="arabic simple">
<li>dots 2348 (the left side of the button)</li>
<li>dots 2356 (the check mark)</li>
<li>dots 1567 (the right side of the button)</li>
</ol>
<p>The check mark shows which of the radio buttons is currently selected.
The label for each radio button appears to the right of its symbol.
The braille representations are:</p>
<ul class="simple">
<li>⢎⠶⡱ selected</li>
<li>⢎ ⡱ not selected</li>
</ul>
</div>
<div class="section" id="switches">
<h5><a class="toc-backref" href="#id22">Switches</a></h5>
<p>A (two-position) switch is rendered as a three-cell symbol:</p>
<ol class="arabic simple">
<li>dots 4568 (the left side of the switch)</li>
<li>dots 1478 (the top and bottom of the switch)</li>
<li>dots 1237 (the right side of the switch)</li>
</ol>
<p>Dots 25 are added to the middle cell if the switch is on,
and dots 36 are added to the middle cell if the switch is off.
In other words, the switch is up when on and down when off.
The label for the switch's current state appears to the right of the symbol.
The braille representations are:</p>
<ul class="simple">
<li>⢸⣛⡇ on</li>
<li>⢸⣭⡇ off</li>
</ul>
</div>
<div class="section" id="range-controls">
<h5><a class="toc-backref" href="#id23">Range Controls</a></h5>
<p>A range control is one which can be adjusted (rather than set or edited).
They include widgets like progress bars, volume sliders, etc.
They're rendered as a three-value summary:</p>
<pre class="literal-block">
* An at sign followed by the current setting.
* The minimum and maximum settings, separated by a dash, within parentheses.
</pre>
<p>The developer of an application can choose which value range a given control uses.
For example, a 16-position volume control currently set to 75% might look like this:</p>
<pre class="literal-block">
&#64;11 (0 - 15)
</pre>
<p>It could, however, also look like this:</p>
<pre class="literal-block">
&#64;75% (0% - 100%)
</pre>
</div>
<div class="section" id="disabled-controls">
<h5><a class="toc-backref" href="#id24">Disabled Controls</a></h5>
<p>If a control is currently disabled then the word <tt class="docutils literal">disabled</tt>,
enclosed within parentheses, appears to the right of its label.
For example:</p>
<pre class="literal-block">
Connect &lt;disabled)
</pre>
</div>
</div>
<div class="section" id="global-actions">
<h4><a class="toc-backref" href="#id25">Global Actions</a></h4>
<p>Android supports a number of global actions that can be performed by pressing
special hardware buttons and/or by touching reserved areas on the screen.
BRLTTY also offers a way to perform these actions from your braille device.
While a better way may be developed in the future, this is how it can be done
right now.</p>
<p>Since Android doesn't use the keyboard function keys (commonly named <tt class="docutils literal">F1</tt>
through <tt class="docutils literal">F12</tt>), BRLTTY uses them to perform global Android actions according
to the following table:</p>
<blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="45%" />
<col width="40%" />
</colgroup>
<tbody valign="top">
<tr><td>Key</td>
<td>Actgion</td>
<td>Android Release</td>
</tr>
<tr><td><tt class="docutils literal">F1</tt></td>
<td>Home</td>
<td>4.1 (Jellybean)</td>
</tr>
<tr><td><tt class="docutils literal">F2</tt></td>
<td>Back</td>
<td>4.1 (Jellybean)</td>
</tr>
<tr><td><tt class="docutils literal">F3</tt></td>
<td>Notifications</td>
<td>4.1 (Jellybean)</td>
</tr>
<tr><td><tt class="docutils literal">F4</tt></td>
<td>Recent Apps</td>
<td>4.1 (Jellybean)</td>
</tr>
<tr><td><tt class="docutils literal">F5</tt></td>
<td>BRLTTY Settings</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td><tt class="docutils literal">F6</tt></td>
<td>Quick Settings</td>
<td>4.2 (Jellybean MR1)</td>
</tr>
<tr><td><tt class="docutils literal">F7</tt></td>
<td>Move to Previous Item</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td><tt class="docutils literal">F8</tt></td>
<td>Move to Next Item</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr><td><tt class="docutils literal">F9</tt></td>
<td>Power Dialog</td>
<td>5.0 (Lollipop)</td>
</tr>
<tr><td><tt class="docutils literal">F10</tt></td>
<td>Menu Key</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
</blockquote>
<p>The way a braille device emulates keyboard function keys differs from model to
model, so you should check the BRLTTY documentation for your braille device.
The most common way is to press the corresponding cursor routing key along with
some other key or key combination. For braille devices that have a braille
keyboard, the most common key to be used in conjunction with a cursor routing
key in order to emulate a keyboard function key is the space bar.</p>
</div>
</div>
<div class="section" id="when-brltty-crashes">
<h3><a class="toc-backref" href="#id26">When BRLTTY Crashes</a></h3>
<p>We hope, of course, that BRLTTY won't crash. If it does, though, we want to
know about it.</p>
<p>If BRLTTY does crash, you'll get a dialog with a message like this:</p>
<pre class="literal-block">
Unfortunately, BRLTTY has stopped.
</pre>
<p>This dialog will stay on the screen until you dismiss it by tapping its <tt class="docutils literal">OK</tt>
button. Android will then try to automatically restart BRLTTY, so don't be
overly concerned if this dialog comes up again. Android will eventually give up
if, after a few automatic restart attempts, it decides that BRLTTY simply won't
stay running.</p>
<p>If this ever happens, then, if you can, connect your device to your host via
USB as soon as possible in order to capture a debug log. To capture a debug
log, use this command:</p>
<pre class="literal-block">
adb logcat -v time -d &gt;/path/to/logfile
</pre>
<p>The <tt class="docutils literal"><span class="pre">-v</span> time</tt> option means to add a timestamp to each log record. The <tt class="docutils literal"><span class="pre">-d</span></tt>
option means to dump the current Android system log. The <tt class="docutils literal">adb logcat</tt> command
writes the log to its standard output, so you need to redirect its standard
output (with <tt class="docutils literal">&gt;</tt>) to wherever you'd like the log to be written.</p>
<p>The reason for capturing the log as soon as possible after a problem is that
Android imposes limits on its log storage so that the log can't consume too
much of your device's resources. If the log becomes too large, Android
automatically removes older entries from it. If you wait too long, therefore,
the part of it that shows how BRLTTY crashed may already have been
automatically removed.</p>
</div>
<div class="section" id="known-issues">
<h3><a class="toc-backref" href="#id27">Known Issues</a></h3>
<p>Serial devices aren't supported. Even though Android devices don't have serial
ports, serial devices still can be connected via a USB to Serial adapter. Users
who have older, serial-only braille devices should still be able to use them
with their Android devices.</p>
</div>
</div>
<div class="section" id="building-brltty">
<h2><a class="toc-backref" href="#id28">Building BRLTTY</a></h2>
<div class="section" id="preparing-your-host-environment">
<h3><a class="toc-backref" href="#id29">Preparing Your Host Environment</a></h3>
<p>BRLTTY is currently being built using:</p>
<ul class="simple">
<li>Version 26.0.1 of the Android SDK build tools.</li>
<li>Version r16b of the Android NDK.</li>
<li>Version 1.8 of OpenJDK.</li>
</ul>
<p>You need the Android SDK (Software Development Kit) for:</p>
<ul class="simple">
<li>installing an application onto your device</li>
<li>removing an application from your device</li>
</ul>
<p>You can get it from <a class="reference external" href="http://developer.android.com/sdk/index.html">The Android SDK Web Page</a>.</p>
<p>You need the Android NDK (Native Development Kit) if you want to do your own
builds. You can get it from <a class="reference external" href="https://developer.android.com/tools/sdk/ndk/index.html">The Android NDK Web Page</a>.</p>
<p>The SDK initially only includes support for the current Android API
(Application Programming Interface) level. BRLTTY, however, needs to support
earlier API levels so that it can run on older releases of Android. Support for
any missing API levels is added whenever the SDK is updated. To do this, use
the following command:</p>
<pre class="literal-block">
android update sdk -u
</pre>
<p>The <tt class="docutils literal"><span class="pre">-u</span></tt> option, which is the short form of the <tt class="docutils literal"><span class="pre">--no-ui</span></tt> option, means to
bypass the graphical interface.</p>
<p>There may be password prompts for installing packages that are provided by
various vendours. Any of these can be easily skipped.</p>
<p>The 64-bit versions of the SDK and NDK depend on 32-bit system libraries. If
you're using a 64-bit version then you need to first ensure that these are
installed on your system. This at least includes:</p>
<ul class="simple">
<li>libc6</li>
<li>libz</li>
<li>libstdc++6</li>
<li>libncurses</li>
</ul>
<p>If you're using a modern Debian GNU/Linux system (<tt class="docutils literal">Wheezy</tt> or later), you can
install these packages for a foreign architecture (in this case, i386) with the
following commands (as root):</p>
<pre class="literal-block">
dpkg --add-architecture i386
apt-get install libncurses5:i386 libstdc++6:i386 zlib1g:i386 libc6:i386
</pre>
</div>
<div class="section" id="installing-and-preparing-the-brltty-source-tree">
<h3><a class="toc-backref" href="#id30">Installing and Preparing the BRLTTY Source Tree</a></h3>
<p>Choose the directory that should contain BRLTTY's source tree (which needn't
yet exist). Then extract the latest BRLTTY source into it with the following
command:</p>
<pre class="literal-block">
git clone https://github.com/brltty/brltty.git /path/to/brltty
</pre>
<p>The directory operand (of <tt class="docutils literal">git clone</tt>) is optional. If you don't specify it
then the directory named <tt class="docutils literal">brltty</tt> within the current working directory is
assumed.</p>
<p>Next, you need to prepare the source tree. This is done as follows:</p>
<pre class="literal-block">
cd /path/to/brltty
./autogen
</pre>
<p>At this point, the source tree is essentially just like what you'd get were you
to unpack an officially released BRLTTY archive. It doesn't yet know anything
about the specifics of your system. It also doesn't yet know anything about the
platform you intend to build BRLTTY for.</p>
<p>Adding information to BRLTTY's source tree regarding the spefiics of your
system, as well as of your intent to build BRLTTY for Android, is done as
follows:</p>
<pre class="literal-block">
export ANDROID_NDK=/path/to/Android/NDK
./cfg-android -q
</pre>
<p>The <tt class="docutils literal"><span class="pre">-q</span></tt> option, which is the short form of the <tt class="docutils literal">configure</tt> command's
<tt class="docutils literal"><span class="pre">--quiet</span></tt> option, means to not display any progress information (there's
usually quite a lot of it) - only warnings and errors are displayed.</p>
<p>All of the options you give to the <tt class="docutils literal"><span class="pre">cfg-android</span></tt> command are passed directly
through to the <tt class="docutils literal">configure</tt> command. So, while <tt class="docutils literal"><span class="pre">cfg-android</span></tt> supplies a
default set of options to <tt class="docutils literal">configure</tt>, it's easy for you to do your own
customization.</p>
</div>
<div class="section" id="building-brltty-for-android">
<h3><a class="toc-backref" href="#id31">Building BRLTTY for Android</a></h3>
<p>In order to be able to build an Android application, a number of Android build
tools need to be added to your command search path. This is done via the
following command:</p>
<pre class="literal-block">
export PATH=&quot;/path/to/Android/SDK/tools:/path/to/Android/SDK/platform-tools:$PATH&quot;
</pre>
<p>The final step is to build the BRLTTY service for Android. This is done as
follows:</p>
<pre class="literal-block">
cd /path/to/brltty/Android/Application
make -s
</pre>
<p>The <tt class="docutils literal"><span class="pre">-s</span></tt> option of the <tt class="docutils literal">make</tt> command, which is short for its <tt class="docutils literal"><span class="pre">--silent</span></tt>
option, means to not display any progress information (there's usually quite a
lot of it) - only warnings and errors are displayed.</p>
<p>The result of the build is the file <tt class="docutils literal"><span class="pre">BRLTTY_App-debug.apk</span></tt>. It will be in the
<tt class="docutils literal">bin/</tt> subdirectory of BRLTTY's Android Application directory:</p>
<pre class="literal-block">
/path/to/brltty/Android/Application/bin/BRLTTY_App-debug.apk
</pre>
<p><tt class="docutils literal">apk</tt> is the file extension used for an installable Android package.</p>
</div>
<div class="section" id="preparing-your-android-device">
<h3><a class="toc-backref" href="#id32">Preparing Your Android Device</a></h3>
<p>You need <tt class="docutils literal">USB Debugging</tt> to be enabled. This is done from the <tt class="docutils literal">Developer
Options</tt> screen. You can get to it from the <tt class="docutils literal">Settings</tt> screen.</p>
<p>Launch the <tt class="docutils literal">Settings</tt> aplication, and look, near the bottom, for <tt class="docutils literal">Developer
Options</tt>. If you can't find it, the most likely cause is a new feature that
was introduced in Android 4.2 (Jelly Bean). If you need to enable it, tap on
<tt class="docutils literal">About Phone</tt>, which, again, can be found near the bottom of the <tt class="docutils literal">Settings</tt>
screen. Then, on the <tt class="docutils literal">About Phone</tt> screen, look for the <tt class="docutils literal">Build Number</tt>
line. Tap on <tt class="docutils literal">Build Nubmer</tt> seven times and your device will officially
declare you to be a developer. You should then be able to find <tt class="docutils literal">Developer
Options</tt> on the <tt class="docutils literal">Settings</tt> screen.</p>
<p>There's a check box at the top-right of the <tt class="docutils literal">Developer Options</tt> screen. It
needs to be checked so that all of the other controls on that screen will be
enabled. After doing that, check the <tt class="docutils literal">USB Debugging</tt> checkebox (which can be
found within the <tt class="docutils literal">Debugging</tt> section). This enables the <tt class="docutils literal">adb</tt> (Android
Debug Bridge) tool to perform functions on your Android device.</p>
</div>
<div class="section" id="installing-brltty-on-your-android-device">
<h3><a class="toc-backref" href="#id33">Installing BRLTTY on Your Android Device</a></h3>
<p>In order to install BRLTTY onto your device, or to remove it from your device,
you need to be in BRLTTY's Android Application directory:</p>
<pre class="literal-block">
cd /path/to/brltty/Android/Application
</pre>
<p>You also need to connect your device to your host via USB.</p>
<p>To install BRLTTY, use this command:</p>
<pre class="literal-block">
make -s install
</pre>
<p>To remove BRLTTY, use this command:</p>
<pre class="literal-block">
make -s uninstall
</pre>
<p>The <tt class="docutils literal">make install</tt> command will fail if BRLTTY is already installed. If
you're wanting to upgrade BRLTTY, however, then removing it first is probably
what you don't want to be doing. This is because removing BRLTTY also causes
its settings to be lost. What you should do instead is reinstall it. You can do
this with the following command:</p>
<pre class="literal-block">
make -s reinstall
</pre>
<p>If you've obtained your Android package file (<tt class="docutils literal">apk</tt>) for BRLTTY from some
other source (than building it for yourself), then it may have a different name
than the make file is expecting. It's useful, therefore, to know what the
actual host commands are for installing and removing Android applications.</p>
<p>The host command for installing an Android application is:</p>
<pre class="literal-block">
adb install /path/to/file
</pre>
<p>The host command for reinstalling an Android application is:</p>
<pre class="literal-block">
adb install -r /path/to/file
</pre>
<p>The host command for removing an Android appliation is:</p>
<pre class="literal-block">
adb uninstall appliation.package.name
</pre>
<p>So, to remove BRLTTY, the host command is:</p>
<pre class="literal-block">
adb uninstall org.a11y.brltty.android
</pre>
<p>If any of these <tt class="docutils literal">make</tt> or <tt class="docutils literal">adb</tt> commands fails with an error like <tt class="docutils literal">device
not found</tt>, it's probably because your host's USB device permissions are
requiring root access. The solution to this problem is to restart the <tt class="docutils literal">adb</tt>
server such that it is running as root. With this done, you yourself will still
be able to use <tt class="docutils literal">adb</tt> as a regular user.</p>
<p>The commands to restart the <tt class="docutils literal">adb</tt> server such that it's running as root are
as follows:</p>
<pre class="literal-block">
su
cd /path/to/Android/SDK/platform-tools
./adb kill-server
./adb start-server
exit
</pre>
</div>
</div>
</div>
</body>
</html>
